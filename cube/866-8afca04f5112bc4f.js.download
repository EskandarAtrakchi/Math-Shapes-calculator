!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e89257bd-9b4a-43ab-b70c-cf588fe185fd",e._sentryDebugIdIdentifier="sentry-dbid-e89257bd-9b4a-43ab-b70c-cf588fe185fd")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{30520:function(e,n,t){"use strict";t.d(n,{Pg:function(){return a},ad:function(){return i}});var r=t(53644),o=t(95586);r.z.object({id:r.z.string(),dataUri:r.z.string()});let a=r.z.object({id:r.z.string(),mediaType:r.z.string()}),i=()=>(0,o.Z)()},91341:function(e,n,t){"use strict";function r(e){return e.replace(/.*?:\/\//g,"").replace(/#.*/g,"").replace(/\?.*/g,"")}t.d(n,{v:function(){return r}})},77377:function(e,n,t){"use strict";t.d(n,{KI:function(){return c},D2:function(){return s},l9:function(){return l}});var r=t(27950),o=t(91341),a=t(50366);let i=e=>{let n="",t="",r="",o=!1,i=!1,s=new a._b({onopentagname(e){r=e},onattribute(e,n){"base"===r&&"href"===e&&(t=n)},ontext(e){"title"===r&&(n+=e)},onclosetag(e){"title"===e&&(o=!0),"base"===e&&(i=!0)}});for(let n=0;n<e.length&&(!o||!i);n+=100){let t=e.slice(n,n+100);s.write(t)}return s.end(),{title:n.trim(),baseHref:t}},s=e=>{let n,t;let{messages:a,debug:s}=e,c=[],d="",u="GET",p=[];for(let e of a){if(s&&p.push(e),"user"===e.role){let o=(0,r.Kk)(e.content);if(!o)continue;o&&("GET"===o.type||"POST"===o.type)&&"string"==typeof o.target?(t=void 0,d=o.target,u=o.type,n=o.body):"eval"===o.type&&(u="eval",t=o.code)}if("assistant"===e.role){let{title:r,baseHref:a}=i(e.content),m={id:e.id,url:l(a)||d,title:r||(0,o.v)(d),method:u,body:n,command:t};s&&(m.debug={messages:p},p=[]),c.push(m)}}return c};function l(e){try{return decodeURI(e)}catch(n){return e}}function c(e){let{id:n,prompt:t,content:r}=e;return s({messages:[{id:"".concat(n,"-user"),role:"user",content:t},{id:n,role:"assistant",content:r}],debug:!0})[0]}},14581:function(e,n,t){"use strict";t.d(n,{Cs:function(){return l},cR:function(){return c},ee:function(){return s},wn:function(){return d}});var r=t(53644),o=t(30520),a=t(54383);let i=r.z.object({id:r.z.string(),pinned:r.z.boolean()}),s=r.z.object({version:r.z.literal(1),attachments:r.z.array(o.Pg),siteContext:r.z.array(i).optional()});function l(){return{version:1,attachments:[]}}function c(e,n,t){let r=l();if(r.attachments=n.attachments,(0,a.Z)(n.siteContext,"Parent lore has no site context"),r.siteContext=[...n.siteContext,{id:e,pinned:!1}],!t.allowInfiniteContext){let e=r.siteContext.filter(e=>e.pinned).slice(-d),n=d-e.length,t=n>0?r.siteContext.filter(e=>!e.pinned).slice(-n):[],o=new Set([...e.map(e=>e.id),...t.map(e=>e.id)]);r.siteContext=r.siteContext.filter(e=>o.has(e.id))}return r}let d=4},88202:function(e,n,t){"use strict";t.d(n,{ip:function(){return s},j:function(){return o}});var r=t(1529);let o="invalid-profile-page",a="https://websim.ai/",i='<action>\n{\n  "type": "GET",\n  "target": "'.concat(a,'"\n}\n</action>'),s={getMessages:()=>[{role:"user",content:i,id:"E3A7GUp"},{id:o,content:r.cv,role:"assistant"}],url:a,content:r.cv,title:"websim.ai",prompt:i}},92268:function(e,n,t){"use strict";t.d(n,{BM:function(){return a},XN:function(){return o},vj:function(){return s}});var r=t(1529);let o="PzOD6Z9",a="https://websim.ai/",i='<action>\n{\n  "type": "GET",\n  "target": "'.concat(a,'"\n}\n</action>'),s={getMessages:()=>[{role:"user",content:i,id:"E3A7GUp"},{id:o,content:r.W_,role:"assistant"}],url:a,content:r.W_,title:"websim.ai",prompt:i}},46587:function(e,n,t){"use strict";t.d(n,{ZZ:function(){return s},_w:function(){return o}});var r=t(1529);let o="LOGGED_IN",a="https://websim.ai",i='<action>\n{\n  "type": "GET",\n  "target": "'.concat(a,'"\n}\n</action>'),s={getMessages:()=>[{role:"user",content:i,id:"E3A7GUp"},{id:o,content:r.IF,role:"assistant"}],url:a,content:r.IF,title:"websim.ai",prompt:i}},75380:function(e,n,t){"use strict";t.d(n,{kM:function(){return l},vg:function(){return s}});var r=t(88202),o=t(92268),a=t(46587);let i={[a._w]:a.ZZ,[o.XN]:o.vj,[r.j]:r.ip},s=Object.fromEntries(Object.entries(i).map(e=>{let[n,t]=e;return[n,t.getMessages()]}));function l(e){return e in i}},27950:function(e,n,t){"use strict";t.d(n,{Kk:function(){return a},QE:function(){return d},RH:function(){return c},ZD:function(){return s},tk:function(){return l}});var r=t(53644);let o=r.z.discriminatedUnion("type",[r.z.object({type:r.z.literal("text"),text:r.z.string()}),r.z.object({type:r.z.literal("image"),source:r.z.object({type:r.z.literal("base64"),media_type:r.z.string(),data:r.z.string()})})]);function a(e){if(!e.startsWith("<action>"))return;let n=e.slice(8,-9);try{return JSON.parse(n)}catch(e){return}}function i(e){return"<action>\n".concat(JSON.stringify(e,null,2),"\n</action>")}function s(e){return i({type:"GET",target:e})}function l(e,n){return i({type:"POST",target:e,body:n})}function c(e){return i({type:"eval",code:e})}function d(e){let n=a(e);return n?"GET"===n.type||"POST"===n.type?n.target:"eval"===n.type?n.code:null:null}r.z.object({id:r.z.string(),role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.union([r.z.string(),r.z.array(o)])}),r.z.object({id:r.z.string(),role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.string(),prefillNextWith:r.z.string().optional()}),r.z.object({role:r.z.enum(["user","assistant","system","function","data","tool"]),content:r.z.string()}).strict()},42104:function(e,n,t){"use strict";t.d(n,{$8:function(){return a},SX:function(){return i}});var r=t(22672);function o(e){var n;return"main"===e.cfPagesBranch?"party.websim.ai":"".concat(null===(n=e.cfPagesCommitSha)||void 0===n?void 0:n.slice(0,7),".party.websim.ai")}function a(e){let n=o(e);return"".concat(n.startsWith("localhost")?"http":"https","://").concat(n)}function i(e,n){let t=o(e);return new r.pl({...n,host:t,async query(){var n;return{token:null===(n=(await e.supabase.auth.getSession()).data.session)||void 0===n?void 0:n.access_token}}})}},1529:function(e,n,t){"use strict";t.d(n,{IF:function(){return d},W_:function(){return c},cv:function(){return l}});var r={};r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var o={};r.d(o,{INVALID_PROFILE_HTML:()=>i,LANDING_HTML:()=>s,LOGGED_IN_HTML:()=>a});let a='<html>\n  <head>\n    <!--  WRITE A NEW URL, DON\'T USE WEBSIM.AI -->\n    <base href="https://websim.ai" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        margin: 0;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .pagination {\n        display: flex;\n        justify-content: center;\n        margin: 1rem 0;\n        height: 2rem;\n      }\n      .pagination button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .pill-buttons {\n        display: flex;\n        column-gap: 0.5rem;\n        margin-left: 0.5rem;\n      }\n      .pill-button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .pill-button.active {\n        background-color: #4d90fe;\n        color: white;\n      }\n      .pill-button.inactive {\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .pill-button-group {\n        display: flex;\n      }\n      .pill-button-group .pill-button:not(:last-child) {\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n      }\n      .pill-button-group .pill-button:not(:first-child) {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="app" class="app">\n      <div id="bookmarks-bar" class="bookmarks-bar">\n        <div class="social-links">\n          <a href="https://twitter.com/websim_ai" class="social-link">\n            <img\n              src="https://abs.twimg.com/favicons/twitter.ico"\n              alt="Twitter favicon"\n              class="social-icon"\n            />\n            <span>@websim_ai</span>\n          </a>\n          <a href="https://discord.gg/websim" class="social-link">\n            <img\n              src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png"\n              alt="Discord favicon"\n              class="social-icon"\n            />\n            <span>discord.gg/websim</span>\n          </a>\n          <a href="https://www.reddit.com/r/WebSim" class="social-link">\n            <img\n              src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png"\n              alt="Reddit favicon"\n              class="social-icon"\n            />\n            <span>r/WebSim</span>\n          </a>\n        </div>\n      </div>\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <h1 class="section-title">Last Creation</h1>\n          <div class="grid-container">\n            <div class="loading-text" v-if="loadingLastPage">Loading...</div>\n            <feed-item\n              v-for="item in lastPage.flatMap(page => page.data)"\n              :key="item.site.id"\n              :feed-item="item"\n            ></feed-item>\n          </div>\n        </div>\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ feedTitle }}</h1>\n            <div class="pill-buttons">\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'likes\', inactive: activeTab !== \'likes\' }"\n                @click="changeTab(\'likes\')"\n              >\n                Liked\n              </button>\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'new_bookmarks\', inactive: activeTab !== \'new_bookmarks\' }"\n                @click="changeTab(\'new_bookmarks\')"\n              >\n                New\n              </button>\n              <span class="pill-button-group">\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_day\', inactive: activeTab !== \'top_day\' }"\n                  @click="changeTab(\'top_day\')"\n                >\n                  Today\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_week\', inactive: activeTab !== \'top_week\' }"\n                  @click="changeTab(\'top_week\')"\n                >\n                  Week\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_month\', inactive: activeTab !== \'top_month\' }"\n                  @click="changeTab(\'top_month\')"\n                >\n                  Month\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="grid-container">\n          <feed-item\n            v-for="item in currentFeed.flatMap(page => page.data)"\n            :key="item.site.id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n        <div class="pagination">\n          <div class="loading-text" v-if="loading">Loading...</div>\n          <button\n            v-if="!loading && currentFeed[currentFeed.length - 1]?.meta?.has_next_page"\n            @click="fetchNextPage(activeTab)"\n          >\n            Load More\n          </button>\n        </div>\n      </div>\n    </div>\n    <script>\n      const { createApp } = Vue;\n      const tabs = {\n        likes: "My Likes",\n        new_bookmarks: "New",\n        top_day: "Top Today",\n        top_week: "Top Week",\n        top_month: "Top Month",\n      };\n\n      const app = createApp({\n        data() {\n          let activeTab = localStorage.getItem("activeTab");\n          if (!Object.keys(tabs).includes(activeTab)) {\n            activeTab = "top_week";\n          }\n\n          return {\n            activeTab,\n            loading: true,\n            loadingLastPage: true,\n            lastPage: [],\n            feedData: {\n              likes: [],\n              new_bookmarks: [],\n              top_day: [],\n              top_week: [],\n              top_month: [],\n            },\n          };\n        },\n        computed: {\n          feedTitle() {\n            return tabs[this.activeTab];\n          },\n          currentFeed() {\n            return this.feedData[this.activeTab];\n          },\n        },\n        methods: {\n          async fetchLastPage() {\n            const user = await websim.getUser();\n            const response = await fetch(\n              `/api/v1/users/${user.id}/sites?${new URLSearchParams({\n                first: 1,\n              })}`,\n              {}\n            );\n            const data = await response.json();\n            this.lastPage.push(data.sites);\n            this.loadingLastPage = false;\n          },\n          async fetchLikes(after = null) {\n            const user = await websim.getUser();\n            const params = new URLSearchParams({ first: 24 });\n            if (after) {\n              params.set("after", after);\n            }\n            const response = await fetch(\n              `/api/v1/users/${user.id}/likes?${params}`\n            );\n            const data = await response.json();\n            this.feedData["likes"].push(data.likes);\n          },\n          async fetchBookmarks(after = null) {\n            const params = new URLSearchParams({ first: 24 });\n            if (after) {\n              params.set("after", after);\n            }\n            const response = await fetch(`/api/v1/bookmarks?${params}`);\n            const data = await response.json();\n            this.feedData["new_bookmarks"].push(data.bookmarks);\n          },\n\n          async fetchTrending(tab, after = null) {\n            const params = new URLSearchParams({\n              range: tab.replace(/^top_/, ""),\n              first: 24,\n            });\n            if (after) {\n              params.set("after", after);\n            }\n            const response = await fetch(`/api/v1/feed/trending?${params}`);\n            const data = await response.json();\n            this.feedData[tab].push(data.feed);\n          },\n          async fetchFeedData(tab, after) {\n            this.loading = true;\n            try {\n              if (tab === "likes") {\n                await this.fetchLikes(after);\n              } else if (tab.includes("top")) {\n                await this.fetchTrending(tab, after);\n              } else if (tab === "new_bookmarks") {\n                await this.fetchBookmarks(after);\n              }\n            } finally {\n              this.loading = false;\n            }\n          },\n          async fetchNextPage(tab) {\n            const pages = this.feedData[tab];\n            const lastPage = pages[pages.length - 1];\n            if (lastPage?.meta.has_next_page) {\n              await this.fetchFeedData(tab, lastPage.meta.end_cursor);\n            }\n          },\n          async changeTab(tab) {\n            this.activeTab = tab;\n\n            if (this.feedData[tab].length === 0) {\n              this.loading = true;\n              await this.fetchFeedData(tab);\n              this.loading = false;\n            }\n            localStorage.setItem("activeTab", tab);\n          },\n        },\n        created() {\n          this.fetchFeedData(this.activeTab);\n          this.fetchLastPage();\n        },\n      });\n      app.component("feed-item", {\n        props: ["feedItem"],\n        template: `\n      <a class="feed-item" :href="getUrl(feedItem)" target="_parent" tabindex="-1">\n          <div class="feed-image">\n            <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site.id + \'/600\'"\n                  @error="handleImageError" width="600" height="315" />\n          </div>\n          <div class="feed-content">\n              <div>\n                  <h3 class="feed-title">{{ feedItem.site.title || \'Untitled\' }}</h3>\n                  <a class="feed-url"\n                      :href="getUrl(feedItem)" target="_parent"\n                      v-html="formatUrl(feedItem.site.url)"></a>\n              </div>\n              <div class="feed-footer">\n                  <a v-if="feedItem.site.owner" :href="\'https://websim.ai/@\' + feedItem.site.owner.username" class="feed-avatar">\n                    <img :src="feedItem.site.owner.avatar_url" alt="Avatar" />\n                    <span>{{ feedItem.site.owner.username }}</span>\n                  </a>\n                  <span class="feed-stats">\n                    <span v-if="feedItem.likes"> ♡{{ feedItem.likes }} </span>\n                      <span v-if="feedItem.views" class="ml-1">\n                      <svg width="12" height="12" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2.5" class="inline-block">\n                        <line x1="6"  y1="8" x2="6" y2="20" />\n                        <line x1="10" y1="1" x2="10" y2="20" />\n                        <line x1="14" y1="11" x2="14" y2="20"/>\n                        <line x1="18" y1="6" x2="18" y2="20"/>\n                      </svg>{{ feedItem.views }}  </span>\n                  </span>\n              </div>\n          </div>\n      </a>\n          `,\n        methods: {\n          handleImageError(event) {\n            event.target.style.display = "none";\n          },\n          formatUrl(url) {\n            if (!url) return "";\n            return url\n              .replace(/&/g, "&amp;")\n              .replace(/</g, "&lt;")\n              .replace(/>/g, "&gt;")\n              .replace(/"/g, "&quot;")\n              .replace(/\'/g, "&#039;");\n          },\n          getUrl(item) {\n            return item.bookmark\n              ? `https://websim.ai/@${item.bookmark.owner.username}/${item.bookmark.slug}`\n              : `https://websim.ai/c/${item.site.id}`;\n          },\n        },\n      });\n\n      app.mount("#app");\n    </script>\n  </body>\n</html>\n',i='<!DOCTYPE html>\n<html>\n  <head>\n    <base href="https://websim.ai/" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        margin: 0;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .pagination {\n        display: flex;\n        justify-content: center;\n        margin: 1rem 0;\n        height: 2rem;\n      }\n      .pagination button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n      .loading-indicator {\n        text-align: center;\n        padding: 1rem;\n        font-size: 1rem;\n        color: #6b7280;\n      }\n    </style>\n  </head>\n\n  <body>\n    <div id="app" class="app">\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ username }}\'s Public Bookmarks</h1>\n          </div>\n        </div>\n        <div class="grid-container">\n          <feed-item\n            v-for="item in flattenedBookmarks"\n            :key="item.site.id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n        <div class="loading-indicator" v-if="loading">\n          Loading more bookmarks...\n        </div>\n      </div>\n    </div>\n    <script>\n      (async () => {\n        const { createApp } = Vue;\n        const params = await window.__get_params__();\n        const username = params.pathname.split("/@").pop();\n        const app = createApp({\n          data() {\n            return {\n              loading: false,\n              username,\n              bookmarks: [],\n              hasNextPage: true,\n              lastCursor: null,\n            };\n          },\n          computed: {\n            flattenedBookmarks() {\n              return this.bookmarks.flatMap((page) => page.data);\n            },\n          },\n          methods: {\n            async fetchBookmarks() {\n              if (this.loading || !this.hasNextPage) return;\n\n              this.loading = true;\n              try {\n                const params = new URLSearchParams({\n                  first: 24,\n                });\n                if (this.lastCursor) {\n                  params.set("after", this.lastCursor);\n                }\n                const response = await fetch(\n                  `/api/v1/users/${this.username}/bookmarks?${params}`\n                );\n                const data = await response.json();\n                this.bookmarks.push(data.bookmarks);\n                this.hasNextPage = data.bookmarks.meta.has_next_page;\n                this.lastCursor = data.bookmarks.meta.end_cursor;\n                console.log("bookmarks", this.bookmarks);\n              } finally {\n                this.loading = false;\n              }\n            },\n            handleScroll() {\n              const scrollPosition = window.innerHeight + window.scrollY;\n              const bodyHeight = document.body.offsetHeight;\n\n              if (scrollPosition >= bodyHeight - 500 && !this.loading) {\n                this.fetchBookmarks();\n              }\n            },\n          },\n          created() {\n            this.fetchBookmarks();\n            window.addEventListener("scroll", this.handleScroll);\n          },\n          unmounted() {\n            window.removeEventListener("scroll", this.handleScroll);\n          },\n        });\n        app.component("feed-item", {\n          props: ["feedItem"],\n          template: `\n      <a class="feed-item" :href="getUrl(feedItem)" target="_parent" tabindex="-1">\n          <div class="feed-image">\n            <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site.id + \'/600\'"\n                  @error="handleImageError" width="600" height="315" />\n          </div>\n          <div class="feed-content">\n              <div>\n                  <h3 class="feed-title">{{ feedItem.site.title || \'Untitled\' }}</h3>\n                  <a class="feed-url"\n                      :href="getUrl(feedItem)" target="_parent"\n                      v-html="formatUrl(feedItem.site.url)"></a>\n              </div>\n              <div class="feed-footer">\n                  <a v-if="feedItem.site.owner" :href="\'https://websim.ai/@\' + feedItem.site.owner.username" class="feed-avatar">\n                    <img :src="feedItem.site.owner.avatar_url" alt="Avatar" />\n                    <span>{{ feedItem.site.owner.username }}</span>\n                  </a>\n                  <span class="feed-stats">\n                    <span v-if="feedItem.likes"> ♡{{ feedItem.likes }} </span>\n                      <span v-if="feedItem.views" class="ml-1">\n                      <svg width="12" height="12" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2.5" class="inline-block">\n                        <line x1="6"  y1="8" x2="6" y2="20" />\n                        <line x1="10" y1="1" x2="10" y2="20" />\n                        <line x1="14" y1="11" x2="14" y2="20"/>\n                        <line x1="18" y1="6" x2="18" y2="20"/>\n                      </svg>{{ feedItem.views }}  </span>\n                  </span>\n              </div>\n          </div>\n      </a>\n          `,\n          methods: {\n            handleImageError(event) {\n              event.target.style.display = "none";\n            },\n            formatUrl(url) {\n              if (!url) return "";\n              return url\n                .replace(/&/g, "&amp;")\n                .replace(/</g, "&lt;")\n                .replace(/>/g, "&gt;")\n                .replace(/"/g, "&quot;")\n                .replace(/\'/g, "&#039;");\n            },\n            getUrl(item) {\n              return item.bookmark\n                ? `https://websim.ai/@${item.bookmark.owner.username}/${item.bookmark.slug}`\n                : `https://websim.ai/c/${item.site.id}`;\n            },\n          },\n        });\n\n        app.mount("#app");\n      })();\n    </script>\n  </body>\n</html>\n',s='<html>\n  <head>\n    <base href="https://websim.ai/?hyperstitioning=true" />\n    <title>websim.ai</title>\n    <script>\n      if (\n        document.cookie\n          .split("; ")\n          .find((row) => row.startsWith("nosleep="))\n          ?.split("=")[1] === "true"\n      ) {\n        document.documentElement.classList.add("dark");\n      }\n    </script>\n    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>\n    <style>\n      *,\n      *::before,\n      *::after {\n        box-sizing: border-box;\n      }\n      a {\n        color: inherit;\n        text-decoration: none;\n      }\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        margin: 0;\n      }\n      body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,\n          segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto,\n          arial, sans-serif;\n      }\n      body::-webkit-scrollbar {\n        display: none;\n      }\n      .dark body {\n        color: #f3f4f6;\n        background: #171717;\n      }\n      .logo {\n        font-family: "Comic Sans MS", cursive;\n        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n        letter-spacing: 0.1em;\n        font-weight: bold;\n      }\n      .logo span {\n        display: inline-block;\n      }\n      .logo span:nth-child(1) {\n        color: #4285f4;\n        transform: rotate(-10deg);\n      }\n      .logo span:nth-child(2) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(3) {\n        color: #fbbc05;\n        transform: rotate(-5deg) translateY(0.1rem);\n      }\n      .logo span:nth-child(4) {\n        color: #4285f4;\n        transform: rotate(10deg) translateY(-0.2rem);\n      }\n      .logo span:nth-child(5) {\n        color: #34a853;\n        transform: rotate(-10deg) translateY(0.2rem);\n      }\n      .logo span:nth-child(6) {\n        color: #ea4335;\n        transform: rotate(5deg) translateY(-0.2rem);\n      }\n      .dark .logo span:nth-child(1) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(2) {\n        color: rgb(153, 246, 228);\n      }\n      .dark .logo span:nth-child(3) {\n        color: rgb(56, 189, 248);\n      }\n      .dark .logo span:nth-child(4) {\n        color: rgb(254, 240, 138);\n      }\n      .dark .logo span:nth-child(5) {\n        color: rgb(249, 168, 212);\n      }\n      .dark .logo span:nth-child(6) {\n        color: rgb(153, 246, 228);\n      }\n      .login {\n        display: block;\n        padding: 4px 8px;\n        border-radius: 5px;\n        font-size: 0.875rem;\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .app {\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        min-height: 100vh;\n      }\n      .bookmarks-bar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        flex-wrap: wrap;\n        gap: 1rem;\n        padding: 0.5rem;\n      }\n      .social-links {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 1rem;\n      }\n      .social-link:any-link {\n        display: flex;\n        align-items: center;\n        column-gap: 0.25rem;\n        color: inherit;\n        text-decoration: none;\n      }\n      .social-link:hover {\n        color: #4d90fe;\n      }\n      .social-icon {\n        width: 1rem;\n        height: 1rem;\n      }\n      .footer-logo {\n        position: fixed;\n        bottom: 1rem;\n        right: 1rem;\n        z-index: 10;\n        font-size: 1.5rem;\n      }\n      .container {\n        max-width: 1280px;\n        width: 100%;\n        margin: 0 auto;\n        padding: 0.5rem;\n      }\n      .pagination {\n        display: flex;\n        justify-content: center;\n        margin: 1rem 0;\n        height: 2rem;\n      }\n      .pagination button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .section {\n        border-radius: 0.375rem;\n        margin: 1rem 0;\n      }\n      .section-header {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        gap: 0.5rem;\n      }\n      .section-title {\n        flex: 1;\n        white-space: nowrap;\n        font-size: 1.25rem;\n        font-weight: 600;\n        color: #171717;\n        margin-top: 0.5rem;\n        margin-bottom: 1rem;\n      }\n      .dark .section-title {\n        color: #f3f4f6;\n      }\n      .grid-container {\n        display: grid;\n        grid-template-columns: repeat(1, minmax(0, 1fr));\n        gap: 1rem;\n      }\n      @media (min-width: 640px) {\n        .grid-container {\n          grid-template-columns: repeat(2, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 768px) {\n        .grid-container {\n          grid-template-columns: repeat(3, minmax(0, 1fr));\n        }\n      }\n      @media (min-width: 1024px) {\n        .grid-container {\n          grid-template-columns: repeat(4, minmax(0, 1fr));\n        }\n      }\n      .loading-text {\n        color: #6b7280;\n        margin-top: 0.5rem;\n      }\n      .pill-buttons {\n        display: flex;\n        column-gap: 0.5rem;\n        margin-left: 0.5rem;\n      }\n      .pill-button {\n        appearance: none;\n        border: none;\n        padding: 0.5rem 0.75rem;\n        border-radius: 9999px;\n        font-size: 0.875rem;\n        cursor: pointer;\n      }\n      .pill-button.active {\n        background-color: #4d90fe;\n        color: white;\n      }\n      .pill-button.inactive {\n        background-color: #e5e7eb;\n        color: #374151;\n      }\n      .pill-button-group {\n        display: flex;\n      }\n      .pill-button-group .pill-button:not(:last-child) {\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n      }\n      .pill-button-group .pill-button:not(:first-child) {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n      }\n      .feed-item {\n        display: flex;\n        flex-direction: column;\n        background-color: #f3f4f6;\n        border-radius: 0.375rem;\n        width: 100%;\n        border: 1px solid #d1d5db;\n        transition: background-color 0.2s, border-color 0.2s;\n      }\n      .feed-item:hover {\n        background-color: #e5e7eb;\n        border-color: #6b7280;\n      }\n      .feed-image {\n        display: flex;\n        width: 100%;\n      }\n      .feed-image img {\n        display: block;\n        width: 100%;\n        height: auto;\n        border-top-left-radius: 0.375rem;\n        border-top-right-radius: 0.375rem;\n      }\n      .feed-content {\n        padding: 0.5rem;\n        text-align: left;\n        overflow: hidden;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        flex-direction: column;\n      }\n      .feed-title {\n        font-size: 1.125rem;\n        font-weight: 500;\n        color: #1f2937;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        margin-bottom: 0.25rem;\n      }\n      .feed-url {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100%;\n        color: #2563eb;\n        text-decoration: none;\n      }\n      .feed-url:hover {\n        text-decoration: underline;\n      }\n      .feed-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 0.875rem;\n        width: 100%;\n        margin-top: 0.5rem;\n      }\n      .feed-avatar {\n        color: #171717;\n        display: flex;\n        align-items: center;\n        overflow: hidden;\n      }\n      .feed-avatar img {\n        width: 1.25rem;\n        height: 1.25rem;\n        border-radius: 9999px;\n        margin-right: 0.25rem;\n      }\n      .feed-stats {\n        color: #6b7280;\n        font-size: 0.75rem;\n        white-space: nowrap;\n      }\n    </style>\n  </head>\n  <body>\n    <div id="app" class="app">\n      <div id="bookmarks-bar" class="bookmarks-bar">\n        <div class="social-links">\n          <a href="https://twitter.com/websim_ai" class="social-link">\n            <img\n              src="https://abs.twimg.com/favicons/twitter.ico"\n              alt="Twitter favicon"\n              class="social-icon"\n            />\n            <span>@websim_ai</span>\n          </a>\n          <a href="https://discord.gg/websim" class="social-link">\n            <img\n              src="https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0a6a49cf127bf92de1e2_icon_clyde_blurple_RGB.png"\n              alt="Discord favicon"\n              class="social-icon"\n            />\n            <span>discord.gg/websim</span>\n          </a>\n          <a href="https://www.reddit.com/r/WebSim" class="social-link">\n            <img\n              src="https://www.redditstatic.com/desktop2x/img/favicon/android-icon-192x192.png"\n              alt="Reddit favicon"\n              class="social-icon"\n            />\n            <span>r/WebSim</span>\n          </a>\n        </div>\n        <a href="https://websim.ai/auth/login" class="login">Login</a>\n      </div>\n      <div class="logo footer-logo">\n        <span>w</span><span>e</span><span>b</span><span>s</span><span>i</span\n        ><span>m</span>\n      </div>\n      <div class="container">\n        <div class="section">\n          <div class="section-header">\n            <h1 class="section-title">{{ feedTitle }}</h1>\n            <div class="pill-buttons">\n              <button\n                class="pill-button"\n                :class="{ active: activeTab === \'new_bookmarks\', inactive: activeTab !== \'new_bookmarks\' }"\n                @click="changeTab(\'new_bookmarks\')"\n              >\n                New\n              </button>\n              <span class="pill-button-group">\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_day\', inactive: activeTab !== \'top_day\' }"\n                  @click="changeTab(\'top_day\')"\n                >\n                  Today\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_week\', inactive: activeTab !== \'top_week\' }"\n                  @click="changeTab(\'top_week\')"\n                >\n                  Week\n                </button>\n                <button\n                  class="pill-button"\n                  :class="{ active: activeTab === \'top_month\', inactive: activeTab !== \'top_month\' }"\n                  @click="changeTab(\'top_month\')"\n                >\n                  Month\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="grid-container">\n          <feed-item\n            v-for="item in currentFeed.flatMap(page => page.data)"\n            :key="item.site.id"\n            :feed-item="item"\n          ></feed-item>\n        </div>\n        <div class="pagination">\n          <div class="loading-text" v-if="loading">Loading...</div>\n          <button\n            v-if="!loading && currentFeed[currentFeed.length - 1]?.meta?.has_next_page"\n            @click="fetchNextPage(activeTab)"\n          >\n            Load More\n          </button>\n        </div>\n      </div>\n    </div>\n    <script>\n      const { createApp } = Vue;\n      const tabs = {\n        new_bookmarks: "New",\n        top_day: "Top Today",\n        top_week: "Top Week",\n        top_month: "Top Month",\n      };\n      const app = createApp({\n        data() {\n          let activeTab = localStorage.getItem("activeTab");\n          if (!Object.keys(tabs).includes(activeTab)) {\n            activeTab = "top_week";\n          }\n\n          return {\n            activeTab,\n            loading: true,\n            feedData: {\n              new_bookmarks: [],\n              top_day: [],\n              top_week: [],\n              top_month: [],\n            },\n          };\n        },\n        computed: {\n          feedTitle() {\n            return tabs[this.activeTab];\n          },\n          currentFeed() {\n            return this.feedData[this.activeTab];\n          },\n        },\n        methods: {\n          async fetchBookmarks(after = null) {\n            const params = new URLSearchParams({ first: 24 });\n            if (after) {\n              params.set("after", after);\n            }\n            const response = await fetch(`/api/v1/bookmarks?${params}`);\n            const data = await response.json();\n            this.feedData["new_bookmarks"].push(data.bookmarks);\n          },\n\n          async fetchTrending(tab, after = null) {\n            const params = new URLSearchParams({\n              range: tab.replace(/^top_/, ""),\n              first: 24,\n            });\n            if (after) {\n              params.set("after", after);\n            }\n            const response = await fetch(`/api/v1/feed/trending?${params}`);\n            const data = await response.json();\n            this.feedData[tab].push(data.feed);\n          },\n          async fetchFeedData(tab, after) {\n            this.loading = true;\n            try {\n              if (tab.includes("top")) {\n                await this.fetchTrending(tab, after);\n              } else if (tab === "new_bookmarks") {\n                await this.fetchBookmarks(after);\n              }\n            } finally {\n              this.loading = false;\n            }\n          },\n          async fetchNextPage(tab) {\n            const pages = this.feedData[tab];\n            const lastPage = pages[pages.length - 1];\n            if (lastPage?.meta.has_next_page) {\n              await this.fetchFeedData(tab, lastPage.meta.end_cursor);\n            }\n          },\n          async changeTab(tab) {\n            this.activeTab = tab;\n\n            if (this.feedData[tab].length === 0) {\n              this.loading = true;\n              await this.fetchFeedData(tab);\n              this.loading = false;\n            }\n            localStorage.setItem("activeTab", tab);\n          },\n        },\n        created() {\n          this.fetchFeedData(this.activeTab);\n        },\n      });\n      app.component("feed-item", {\n        props: ["feedItem"],\n        template: `\n      <a class="feed-item" :href="getUrl(feedItem)" target="_parent" tabindex="-1">\n          <div class="feed-image">\n            <img :src="\'https://images.websim.ai/v1/site/\' + feedItem.site.id + \'/600\'"\n                  @error="handleImageError" width="600" height="315" />\n          </div>\n          <div class="feed-content">\n              <div>\n                  <h3 class="feed-title">{{ feedItem.site.title || \'Untitled\' }}</h3>\n                  <a class="feed-url"\n                      :href="getUrl(feedItem)" target="_parent"\n                      v-html="formatUrl(feedItem.site.url)"></a>\n              </div>\n              <div class="feed-footer">\n                  <a v-if="feedItem.site.owner" :href="\'https://websim.ai/@\' + feedItem.site.owner.username" class="feed-avatar">\n                    <img :src="feedItem.site.owner.avatar_url" alt="Avatar" />\n                    <span>{{ feedItem.site.owner.username }}</span>\n                  </a>\n                  <span class="feed-stats">\n                    <span v-if="feedItem.likes"> ♡{{ feedItem.likes }} </span>\n                      <span v-if="feedItem.views" class="ml-1">\n                      <svg width="12" height="12" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2.5" class="inline-block">\n                        <line x1="6"  y1="8" x2="6" y2="20" />\n                        <line x1="10" y1="1" x2="10" y2="20" />\n                        <line x1="14" y1="11" x2="14" y2="20"/>\n                        <line x1="18" y1="6" x2="18" y2="20"/>\n                      </svg>{{ feedItem.views }}  </span>\n                  </span>\n              </div>\n          </div>\n      </a>\n          `,\n        methods: {\n          handleImageError(event) {\n            event.target.style.display = "none";\n          },\n          formatUrl(url) {\n            if (!url) return "";\n            return url\n              .replace(/&/g, "&amp;")\n              .replace(/</g, "&lt;")\n              .replace(/>/g, "&gt;")\n              .replace(/"/g, "&quot;")\n              .replace(/\'/g, "&#039;");\n          },\n          getUrl(item) {\n            return item.bookmark\n              ? `https://websim.ai/@${item.bookmark.owner.username}/${item.bookmark.slug}`\n              : `https://websim.ai/c/${item.site.id}`;\n          },\n        },\n      });\n\n      app.mount("#app");\n    </script>\n  </body>\n</html>\n';var l=o.INVALID_PROFILE_HTML,c=o.LANDING_HTML,d=o.LOGGED_IN_HTML},27624:function(e,n,t){"use strict";t.d(n,{tT:function(){return O},o2:function(){return A},CommonProviders:function(){return R},DE:function(){return P},cC:function(){return T},ze:function(){return G},JI:function(){return I},Pb:function(){return N},pV:function(){return S},Xn:function(){return D},Wo:function(){return E},Iq:function(){return C},M6:function(){return M},r$:function(){return L}});var r=t(37821),o=t(77377),a=t(88202),i=t(92268),s=t(46587),l=t(61153),c=t(71786),d=t(64722),u=t(8221),p=t(30675),m=t(17344),f=t(8862),g=t(80997);let b=e=>["site_data",e];var h=t(75005),v=t(87202),w=t(77362),x=t(84578),k=t.n(x),y=t(90168),z=t(58078),j=t(54383),_=t(46302);let T=(0,z.createContext)(i.XN),I=(0,z.createContext)(void 0),C=()=>(0,z.useContext)(T),P=(0,z.createContext)(null),E=()=>(0,z.useContext)(P),S=(0,z.createContext)(!1),U=(0,z.createContext)(()=>{});function L(){return[(0,z.useContext)(S),(0,z.useContext)(U)]}function R(e){let[n,t]=(0,z.useState)(!1),o=(0,y.usePathname)(),a=(0,g.W)(o),i=(0,v.Dy)((0,v.VT)(k()()?v.LO:v.we,{activationConstraint:{distance:5}}));return(0,r.jsx)(O.Provider,{value:e.cfPagesBranch,children:(0,r.jsx)(A.Provider,{value:e.cfPagesCommitSha,children:(0,r.jsx)(D.Provider,{value:a,children:(0,r.jsx)(m.fS,{user:e.user,children:(0,r.jsx)(m.Ti.Provider,{value:e.profile,children:(0,r.jsx)(d.YI,{children:(0,r.jsx)(B,{route:a,children:(0,r.jsx)(S.Provider,{value:n,children:(0,r.jsx)(U.Provider,{value:t,children:(0,r.jsx)(F,{children:(0,r.jsx)(v.LB,{sensors:i,collisionDetection:v.pE,children:e.children})})})})})})})})})})})}let O=(0,z.createContext)(void 0),A=(0,z.createContext)(void 0),D=(0,z.createContext)(null);function F(e){let n=(0,y.usePathname)(),t=(0,g.W)(n),o=(0,p.a)(null==t?void 0:t.username),a=(0,z.useContext)(m.Ti),i=(()=>{if((null==t?void 0:t.type)==="bookmark"||(null==t?void 0:t.type)==="profile"){var e;return null===(e=o.data)||void 0===e?void 0:e.user}return a})();return(0,r.jsx)(l.Ev.Provider,{value:null!=i?i:null,children:e.children})}let G=(0,z.createContext)(void 0),N=(0,z.createContext)(null);function B(e){var n,t,l,d,p,g,v,x,k;let{route:C,children:E}=e,S=(0,y.usePathname)(),U=(0,f.h)(),L=(0,h.$)(),R=(0,z.useContext)(m.Ec),O=(0,w.useQuery)({queryKey:b(S),queryFn:async()=>{let e;if((0,j.Z)(C,"Route must be defined"),"bookmark"===C.type)e=await U.sites.getSiteBySlug({params:{username:C.username,slug:C.slug}});else if("site"===C.type)e=await U.sites.getSite({params:{site_id:C.siteId}});else if("profile"===C.type){var n;let t=await L.from("bookmark").select("site_id, slug, owner:profile!owner_id(username,id)").eq("slug","profile").eq("owner.username",C.username).eq("visibility","public").single();(null===(n=t.data)||void 0===n?void 0:n.site_id)&&(e=await U.sites.getSite({params:{site_id:t.data.site_id}})),e=await U.sites.getSite({params:{site_id:a.j}})}else e=await U.sites.getSite({params:{site_id:R?s._w:i.XN}});if(200!==e.status)throw e;return e.body},enabled:!!C}),A=null===(n=O.data)||void 0===n?void 0:n.site,D=(0,z.useMemo)(()=>{var e;return A?[{id:null!==(e=A.parent_id)&&void 0!==e?e:s._w,title:"",url:"",method:"GET"},(0,o.KI)({id:A.id,prompt:A.rawPrompt,content:""})]:[]},[A]),F=D[D.length-1];return(0,r.jsx)(T.Provider,{value:null!==(p=null==A?void 0:A.id)&&void 0!==p?p:s._w,children:(0,r.jsx)(N.Provider,{value:null!==(g=null===(d=O.data)||void 0===d?void 0:null===(l=d.site)||void 0===l?void 0:null===(t=l.owner)||void 0===t?void 0:t.id)&&void 0!==g?g:null,children:(0,r.jsx)(P.Provider,{value:F,children:(0,r.jsx)(I.Provider,{value:null!==(v=null==A?void 0:A.model)&&void 0!==v?v:void 0,children:(0,r.jsx)(G.Provider,{value:null!==(x=null==A?void 0:A.lore)&&void 0!==x?x:void 0,children:(0,r.jsx)(u.z6,{queue:[],children:(0,r.jsx)(c.f6,{history:D,children:(0,r.jsx)(_.Fd,{messages:null!==(k=D.flatMap(e=>{var n,t;return null!==(t=null===(n=e.debug)||void 0===n?void 0:n.messages)&&void 0!==t?t:[]}))&&void 0!==k?k:[],children:E})})})})})})})})}let M=()=>(0,z.useContext)(I)},56164:function(e,n,t){"use strict";t.d(n,{T:function(){return o}});var r=t(37821);function o(e){var n;return(0,r.jsxs)("div",{className:"logo ".concat(null!==(n=e.className)&&void 0!==n?n:""),children:[(0,r.jsx)("span",{className:"dark:!text-yellow-200",children:"w"}),(0,r.jsx)("span",{className:"dark:!text-teal-200",children:"e"}),(0,r.jsx)("span",{className:"dark:!text-sky-400",children:"b"}),(0,r.jsx)("span",{className:"dark:!text-yellow-200",children:"s"}),(0,r.jsx)("span",{className:"dark:!text-pink-300",children:"i"}),(0,r.jsx)("span",{className:"dark:!text-teal-200",children:"m"})]})}t(10173)},46302:function(e,n,t){"use strict";t.d(n,{Fd:function(){return s},Sg:function(){return a}});var r=t(37821),o=t(58078);let a=(0,o.createContext)(void 0),i=(0,o.createContext)(void 0);function s(e){let[n,t]=(0,o.useState)({messages:e.messages});return(0,r.jsx)(a.Provider,{value:t,children:(0,r.jsx)(i.Provider,{value:n,children:e.children})})}},61153:function(e,n,t){"use strict";t.d(n,{BookmarkController:function(){return m},Oq:function(){return p},sY:function(){return d},Ev:function(){return c},Q:function(){return u},BO:function(){return f}});var r=t(37821),o=t(27624),a=t(53644);a.z.object({avatar_url:a.z.string().optional(),username:a.z.string().min(3).max(32).regex(/^[a-zA-Z0-9_]{3,32}$/).optional(),description:a.z.string().optional()}),t(75005);var i=t(58078),s=t(17344),l=t(82366);let c=(0,i.createContext)(null),d=(0,i.createContext)(null),u=(0,i.createContext)(null),p=(0,i.createContext)({});function m(e){let[n,t]=(0,i.useState)(""),[a,m]=(0,i.useState)({}),f=(0,i.useContext)(s.Ti),g=(0,i.useContext)(c),b=f,h=(0,i.useContext)(o.Xn);return(null==h?void 0:h.type)==="profile"?b=g:(null==h?void 0:h.type)==="bookmark"&&(b=g),(0,i.useEffect)(()=>{b&&(m({userFilter:{username:b.username,slugPrefix:""}}),b.id!==(null==f?void 0:f.id)?t("@".concat(b.username)):t(""))},[f,b]),(0,i.useEffect)(()=>{let e={};(0,l.X)(e,n),m(e)},[n]),(0,r.jsx)(d.Provider,{value:n,children:(0,r.jsx)(u.Provider,{value:t,children:(0,r.jsx)(p.Provider,{value:a,children:e.children})})})}let f=()=>(0,i.useContext)(c)},82366:function(e,n,t){"use strict";t.d(n,{R:function(){return a},X:function(){return o}});var r=t(53644);r.z.object({username:r.z.string(),slugPrefix:r.z.string()});let o=(e,n)=>{let t=n.split(" "),r=[];for(let n of t){let t=/^@(\w*)\/?(.*)$/.exec(n);if(t){var o;e.userFilter={username:t[1],slugPrefix:null!==(o=t[2])&&void 0!==o?o:""};continue}r.push(n)}e.textFilter=r.join(" ")};function a(e,n,t){if(e.userFilter)return(n.id!==t.owner_id||n.username===e.userFilter.username)&&(""===e.userFilter.slugPrefix||!!(t.slug&&t.slug.startsWith(e.userFilter.slugPrefix)));if(e.textFilter){var r;return!!(t.title.toLowerCase().includes(e.textFilter.toLowerCase())||(null===(r=t.slug)||void 0===r?void 0:r.toLowerCase().includes(e.textFilter.toLowerCase())))}return!0}},77391:function(e,n,t){"use strict";t.d(n,{$5:function(){return d},Me:function(){return i},Tk:function(){return u},Tl:function(){return o},YD:function(){return l},fW:function(){return c},nP:function(){return a},ye:function(){return s}});var r=t(35238);function o(){return"true"===(0,r.X)("pin_sidebar")}function a(e){(0,r.t)("pin_sidebar",e.toString())}function i(e){(0,r.t)("b",e)}function s(){return(0,r.X)("b")}function l(e){(0,r.t)("b_open",e)}function c(){return(0,r.X)("b_open")}function d(e){(0,r.t)("active_sidebar_tab",e)}function u(){var e;return null!==(e=(0,r.X)("active_sidebar_tab"))&&void 0!==e?e:"bookmarks"}},71786:function(e,n,t){"use strict";t.d(n,{$n:function(){return m},NT:function(){return l},RJ:function(){return c},Tl:function(){return i},Wo:function(){return u},Yz:function(){return p},f6:function(){return d},vr:function(){return a},wC:function(){return s}});var r=t(37821),o=t(58078);let a=(0,o.createContext)(void 0),i=(0,o.createContext)(void 0),s=(0,o.createContext)(void 0),l=(0,o.createContext)(void 0),c=(0,o.createContext)(void 0);function d(e){let[n,t]=(0,o.useState)(e.history),[d,u]=(0,o.useState)(e.history.length-1);(0,o.useEffect)(()=>{e.history.length>0&&(u(e.history.length-1),t(e.history))},[e.history]);let p=(0,o.useRef)();return(0,r.jsx)(a.Provider,{value:t,children:(0,r.jsx)(i.Provider,{value:n,children:(0,r.jsx)(l.Provider,{value:d,children:(0,r.jsx)(s.Provider,{value:u,children:(0,r.jsx)(c.Provider,{value:p,children:e.children})})})})})}function u(){let e=(0,o.useContext)(i),n=(0,o.useContext)(l);if(0!==e.length)return e[n]}function p(){let e=(0,o.useContext)(i),n=(0,o.useContext)(l);if(0!==e.length)return e[n-1]}function m(){let e=(0,o.useContext)(i),n=(0,o.useContext)(l);if(0!==e.length)return e[n+1]}},64722:function(e,n,t){"use strict";t.d(n,{$Y:function(){return a},YI:function(){return s},fP:function(){return i}});var r=t(37821),o=t(58078);let a=(0,o.createContext)("exited"),i=(0,o.createContext)(()=>{});function s(e){let[n,t]=(0,o.useState)("exited");return(0,r.jsx)(a.Provider,{value:n,children:(0,r.jsx)(i.Provider,{value:t,children:e.children})})}},8221:function(e,n,t){"use strict";t.d(n,{sX:function(){return c},z6:function(){return l}});var r=t(37821),o=t(14233),a=t(58078);let i=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0);function l(e){let[n,t]=(0,a.useState)(e.queue);return(0,r.jsx)(i.Provider,{value:t,children:(0,r.jsx)(s.Provider,{value:n,children:e.children})})}function c(e){let{siteId:n}=e,[t,l,c]=function(e){let[n,t]=(0,a.useState)(!1),r=(0,a.useContext)(s),o=(0,a.useContext)(i),[l,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{r&&e&&o&&r.includes(e)&&(t(!1),console.log("remove is navigating"),o(r.filter(n=>n!==e)))},[r,o,e]);let d=(0,a.useCallback)(()=>{(async()=>{try{if(l)return;c(!0);let e=await fetch("/api/recommended");if(!e.ok)throw Error("Failed to fetch recommended sites");let{data:n}=await e.json();if(!n||!o)return;o(n.map(e=>null==e?void 0:e.site_id))}catch(e){console.error("Error fetching recommended sites:",e)}c(!1)})()},[l,o]);return(0,a.useEffect)(()=>{(!r||(null==r?void 0:r.length)<3)&&d()},[r,d]),[r,n,t]}(n),u=null==t?void 0:t[0];return(0,r.jsxs)(o.default,{href:u?"/c/".concat(u):"#",className:"\n        hover:bg-gray-200 transition-all duration-300 ease-in-out rounded-full group\n        p-0 ml-1\n        dark:hover:bg-neutral-600 flex justify-start items-center flex-col\n        ".concat(u?"":"opacity-20 cursor-not-allowed","\n      "),"aria-label":"Random Page",onClick:e=>{u?c(!0):e.preventDefault()},...!u&&{"aria-disabled":!0,tabIndex:-1},children:[(0,r.jsx)("span",{className:"text-[8px] absolute -translate-y-[10px] opacity-0 text-gray-500 dark:text-neutral-200 group-hover:opacity-100 transition-all",children:u?"Random":""}),(0,r.jsx)(d,{isAnimating:l})]})}let d=e=>{let{isAnimating:n}=e,t=(0,a.useRef)(null),o=(0,a.useCallback)(()=>{let e=[];for(let n=0;n<=3.5*Math.PI*2;n+=.1){let t=Math.min(n/1.6,11),r=12+t*Math.cos(n),o=12+t*Math.sin(n);e.push("".concat(r,",").concat(o))}t.current&&t.current.setAttribute("d","M".concat(e.join(" L")))},[]);return(0,a.useEffect)(()=>{o()},[o]),(0,r.jsx)("div",{className:"[&:not(:hover)]:pause animate-reverse-spin-slow",children:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:["animate-reverse-spin color-gray-200 dark:gray-600",n?" ":"pause"].join(" "),children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("radialGradient",{id:"fadeOut",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0"}),(0,r.jsx)("stop",{offset:"5%",stopColor:"currentColor",stopOpacity:"1"}),(0,r.jsx)("stop",{offset:"90%",stopColor:"currentColor",stopOpacity:"1"}),(0,r.jsx)("stop",{offset:"95%",stopColor:"currentColor",stopOpacity:"0"})]})}),(0,r.jsx)("path",{ref:t,fill:"none",stroke:"url(#fadeOut)",strokeWidth:.9,strokeLinecap:"butt"})]})})}},30675:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});var r=t(8862),o=t(77362);function a(e){let n=(0,r.h)();return(0,o.useQuery)({queryKey:["user",e],queryFn:async()=>{if(!e)throw Error("Username is undefined");let t=await n.users.getUser({params:{username:e}});if(200!==t.status)throw t;return t.body},enabled:!!e})}},17344:function(e,n,t){"use strict";t.d(n,{Ec:function(){return a},Ti:function(){return s},fS:function(){return i}});var r=t(37821),o=t(58078);let a=(0,o.createContext)(null);function i(e){let{user:n,children:t}=e;return(0,r.jsx)(a.Provider,{value:n,children:t})}let s=(0,o.createContext)(null)},56942:function(e,n,t){"use strict";t.d(n,{Lb:function(){return m},Pi:function(){return p},eP:function(){return d},rV:function(){return c}});var r=t(75005),o=t(77362),a=t(87601),i=t(18151),s=t(58078),l=t(17344);function c(){var e;let n=(0,r.$)(),t=(0,s.useContext)(l.Ec);return null!==(e=(0,o.useQuery)({queryKey:["settings"],queryFn:async()=>{let{data:e,error:t}=await n.from("settings").select("model, usage_refresh_emails").single();if(t)throw t;return e},enabled:!!t}).data)&&void 0!==e?e:{model:null,usage_refresh_emails:null}}function d(){let e=(0,r.$)(),n=(0,a.useQueryClient)();return(0,i.useMutation)({mutationFn:async n=>{let{data:t,error:r}=await e.from("settings").upsert(n).single();if(r)throw r},onSuccess:()=>{n.invalidateQueries({queryKey:["settings"]})}}).mutateAsync}let u="anthropic_api_key";function p(){return window.localStorage.getItem(u)||void 0}function m(e){window.localStorage.setItem(u,e||"")}},11696:function(e,n,t){"use strict";t.d(n,{l:function(){return a},z:function(){return i}});var r=t(92268),o=t(46587);function a(e){let n=new URL(window.location.href);return e(n),function(e){let n=new URL(e.toString());n.search="";let t=Array.from(e.searchParams.entries()).map(e=>{let[n,t]=e;return"".concat(n,"=").concat(t)}).join("&"),r=n.toString();return t.length>0&&(r+="?"+t),r}(n)}function i(e){return e===o._w||e===r.XN?"/":"/c/".concat(e)}},35238:function(e,n,t){"use strict";t.d(n,{X:function(){return o},t:function(){return a}});var r=t(58078);function o(e){let[,n]=(0,r.useState)({});return(0,r.useEffect)(()=>{let t=t=>{t.detail.key===e&&n({})};return window.addEventListener("session_storage",t),()=>{window.removeEventListener("session_storage",t)}},[e]),window.sessionStorage.getItem(e)}function a(e,n){null===n?window.sessionStorage.removeItem(e):window.sessionStorage.setItem(e,n),window.dispatchEvent(new CustomEvent("session_storage",{detail:{key:e}}))}},73164:function(e,n,t){"use strict";t.d(n,{HV:function(){return i},O9:function(){return c},fk:function(){return s},kL:function(){return l}});var r=t(35238),o=t(84578),a=t.n(o);function i(){return"true"===(0,r.X)("maximize")}function s(){return"true"===window.sessionStorage.getItem("maximize")}function l(e){(0,r.t)("maximize",e.toString())}function c(){let e=i(),n=window!==window.top;return a()()||e||n}},8862:function(e,n,t){"use strict";let r;t.d(n,{h:function(){return ef}});var o=t(42104),a=t(27624),i=t(58078),s=t(75005),l=t(17428),c=t(53644),d=t(14581),u=t(88202),p=t(92268),m=t(46587),f=t(22465).lW;function g(e){return Object.fromEntries(new URLSearchParams(function(e){let n=e.length%4;return n&&(e+="=".repeat(4-n)),"function"==typeof atob?atob(e):f.from(e,"base64").toString()}(e)).entries())}function b(e){return function(n,t){try{return e(n)}catch(e){return t.addIssue({code:c.z.ZodIssueCode.custom,message:e instanceof Error?e.message:"Decode failed"}),c.z.NEVER}}}let h=c.z.union([c.z.number().int().min(100).max(102),c.z.number().int().min(300).max(308),c.z.number().int().min(400).max(419),c.z.number().int().min(500).max(511)]),v=c.z.number().int().min(200).max(207);c.z.union([v,h]);let w=/^[a-zA-Z0-9]{17}$/,x=new RegExp("^(".concat(w.source,"|").concat(m._w,"|").concat(p.XN,"|").concat(u.j,")$")),k=/^[a-zA-Z0-9_]{3,32}$/,y=/^[a-zA-Z0-9-]{3,50}$/,z=c.z.string().uuid().transform(e=>({id:e,username:void 0})).or(c.z.string().regex(k).transform(e=>({id:void 0,username:e}))),j=c.z.object({message:c.z.string(),code:c.z.string().optional(),cause:c.z.unknown().optional()}).catchall(c.z.unknown()),_=c.z.object({has_next_page:c.z.boolean(),has_previous_page:c.z.boolean(),start_cursor:c.z.string().nullable(),end_cursor:c.z.string().nullable()}),T=e=>{let{min:n=0,max:t=100,cursor:r,extend:o={}}=e;return c.z.object({first:c.z.coerce.number().int().positive().min(n).max(t).optional(),last:c.z.coerce.number().int().positive().min(n).max(t).optional(),before:r.optional(),after:r.optional()}).extend(o).superRefine((e,n)=>{void 0!==e.first&&void 0!==e.last&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"Only one of `first` or `last` can be set",path:["first"]}),void 0!==e.before&&void 0!==e.after&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"Only one of `before` or `after` can be set",path:["before"]}),void 0!==e.first&&void 0!==e.before&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"`first` and `before` cannot be used together",path:["first"]}),void 0!==e.last&&void 0!==e.after&&n.addIssue({code:c.z.ZodIssueCode.custom,message:"`last` and `after` cannot be used together",path:["last"]})})},I=c.z.object({}).and(c.z.discriminatedUnion("type",[c.z.object({type:c.z.literal("get"),url:c.z.string()}),c.z.object({type:c.z.literal("post"),url:c.z.string(),body:c.z.record(c.z.string())}),c.z.object({type:c.z.literal("eval"),code:c.z.string()}),c.z.object({type:c.z.literal("continue")}),c.z.object({type:c.z.literal("edit"),text:c.z.string()})])),C=c.z.object({id:c.z.string().uuid(),username:c.z.string().regex(k).nullable(),avatar_url:c.z.string().url().nullable(),description:c.z.string().nullable(),twitter:c.z.string().nullable(),discord:c.z.string().nullable()}),P=c.z.object({username:c.z.string().regex(k),description:c.z.string().nullable(),twitter:c.z.string().nullable(),discord:c.z.string().nullable()}),E=c.z.object({model:c.z.string().nullable()}),S=c.z.enum(["public","unlisted","private"]),U=c.z.object({id:c.z.string().regex(w),parent_id:c.z.string().regex(w).nullable(),created_at:c.z.string().datetime({offset:!0}),state:c.z.enum(["initial","generating","done","failed"]),owner:C.nullable(),model:c.z.string().nullable(),lore:d.ee.nullable(),title:c.z.string().nullable(),url:c.z.string().nullable(),prompt:I.nullable(),rawPrompt:c.z.string()}),L=c.z.object({data:c.z.array(c.z.object({site:U,cursor:c.z.string()})),meta:_}),R=T({cursor:c.z.string().transform(b(g)).pipe(c.z.object({id:c.z.string().regex(w),at:c.z.string().datetime({offset:!0})}))}),O=c.z.object({parent_id:c.z.string().regex(w).nullable(),prompt:I,model:c.z.string(),lore:d.ee,apiKey:c.z.string().nullable()}),A=c.z.object({created_at:c.z.string().datetime({offset:!0}),site_id:c.z.string().regex(w),user:C.nullable()}),D=T({cursor:c.z.string().transform(b(g)).pipe(c.z.object({id:c.z.coerce.number().int().positive()}))}),F=c.z.object({cursor:c.z.string(),like:A,site:U}),G=c.z.object({data:c.z.array(F),meta:_}),N=c.z.object({id:c.z.string().regex(w),title:c.z.string(),created_at:c.z.string().datetime({offset:!0}),slug:c.z.string().regex(y).nullable(),visibility:S,owner:C.nullable(),site_id:c.z.string().regex(w).nullable()}),B=c.z.object({cursor:c.z.string(),bookmark:N,site:U}),M=c.z.object({data:c.z.array(B),meta:_}),q=T({cursor:c.z.string().transform(b(g)).pipe(c.z.object({id:c.z.string().regex(w),at:c.z.string().datetime({offset:!0})})),extend:{owner:c.z.string().regex(k).optional()}}),$=c.z.object({title:c.z.string(),site_id:c.z.string().regex(w),slug:c.z.string().regex(y).nullish()}),W=c.z.object({cursor:c.z.string(),site:U,bookmark:N.nullable(),views:c.z.number().int().positive(),likes:c.z.number().int().positive()}),Y=c.z.object({data:c.z.array(W),meta:_}),Z=T({cursor:c.z.string().transform(b(g)).pipe(c.z.object({id:c.z.string().regex(w),score:c.z.string().pipe(c.z.coerce.number().int().positive())})),extend:{range:c.z.enum(["day","week","month","all"]).optional().default("day")}}),X=c.z.object({created_at:c.z.string().datetime({offset:!0}),user:C}),H=c.z.object({cursor:c.z.string(),follow:X}),V=c.z.object({data:c.z.array(H),meta:_.extend({count:c.z.number().int().positive()})}),J=T({cursor:c.z.string().transform(b(g)).pipe(c.z.object({id:c.z.string().regex(w),to:c.z.string().regex(w),at:c.z.string().datetime({offset:!0})}))}),K=(0,l.vR)(),Q=K.router({setCurrentUserAvatar:{method:"PUT",path:"/user/avatar",contentType:"multipart/form-data",body:K.type(),responses:{200:c.z.object({user:C})},metadata:{openapi:{requestBody:{content:{"multipart/form-data":{schema:{type:"object",properties:{avatar:{type:"string",format:"binary"}},required:["avatar"]},encoding:{avatar:{contentType:"image/jpeg, image/png, image/webp"}}}}},security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),ee=(0,l.vR)(),en=ee.router({getBookmark:{description:"Get a bookmark by ID",method:"GET",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(w)}),responses:{200:c.z.object({bookmark:N,site:U})}},getBookmarkBySlug:{description:"Get a bookmark by username and slug",method:"GET",path:"/bookmarks/:username/:slug",pathParams:c.z.object({username:c.z.string().regex(k),slug:c.z.string().regex(y)}),responses:{200:c.z.object({bookmark:N,site:U})}},createBookmark:{description:"Create a new bookmark",method:"POST",path:"/bookmarks",body:$,responses:{200:c.z.object({bookmark:N,site:U})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateBookmark:{description:"Update a bookmark by ID",method:"PATCH",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(w)}),body:$.partial(),responses:{200:c.z.object({bookmark:N,site:U})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},deleteBookmark:{description:"Delete a bookmark by ID",method:"DELETE",path:"/bookmarks/:bookmark_id",pathParams:c.z.object({bookmark_id:c.z.string().regex(w)}),body:ee.noBody(),responses:{204:ee.noBody()},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getCurrentUserBookmarks:{description:"Get latest bookmarks for the current user",method:"GET",path:"/user/bookmarks",query:q,responses:{200:c.z.object({data:c.z.array(c.z.object({bookmark:N,site:U,cursor:c.z.string()})),meta:_})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUserBookmarks:{description:"Get latest bookmarks for a user by username",method:"GET",path:"/users/:usernameOrId/bookmarks",pathParams:c.z.object({usernameOrId:z}),query:q,responses:{200:c.z.object({bookmarks:M})}},getBookmarks:{description:"Get latest public bookmarks",method:"GET",path:"/bookmarks",query:q,responses:{200:c.z.object({bookmarks:M})}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),et=(0,l.vR)().router({getTrendingFeed:{method:"GET",path:"/feed/trending",query:Z,responses:{200:c.z.object({feed:Y})}},getTopFeed:{method:"GET",path:"/feed/top",query:Z,responses:{200:c.z.object({feed:Y})}},getNewFeed:{method:"GET",path:"/feed/new",query:Z,responses:{200:c.z.object({feed:Y})}},getFollowingFeed:{method:"GET",path:"/feed/following",query:Z,responses:{200:c.z.object({feed:Y})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),er=(0,l.vR)(),eo=er.router({followUser:{method:"POST",path:"/users/:usernameOrId/follow",pathParams:c.z.object({usernameOrId:z}),body:er.noBody(),responses:{200:c.z.object({follow:X})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},unfollowUser:{method:"DELETE",path:"/users/:usernameOrId/follow",pathParams:c.z.object({usernameOrId:z}),body:er.noBody(),responses:{204:er.noBody()},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUserFollowing:{method:"GET",path:"/users/:usernameOrId/following",pathParams:c.z.object({usernameOrId:z}),query:J,responses:{200:c.z.object({following:V})}},getUserFollowers:{method:"GET",path:"/users/:usernameOrId/followers",pathParams:c.z.object({usernameOrId:z}),query:J,responses:{200:c.z.object({followers:V})}},getCurrentUserFollowing:{method:"GET",path:"/user/following",query:J,responses:{200:c.z.object({following:V})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getCurrentUserFollowers:{method:"GET",path:"/user/followers",query:J,responses:{200:c.z.object({followers:V})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),ea=(0,l.vR)(),ei=ea.router({getSiteHtmlById:{method:"GET",path:"/sites/:site_id/html",pathParams:c.z.object({site_id:c.z.string().regex(x)}),query:c.z.object({raw:c.z.boolean().optional(),origin:c.z.string().url().optional()}).superRefine((e,n)=>{e.raw||e.origin||n.addIssue({code:c.z.ZodIssueCode.custom,message:"either raw or origin is required",path:["origin"]})}),responses:{200:ea.otherResponse({contentType:"text/html; charset=utf-8",body:ea.type()})}},getSiteHtmlBySlug:{method:"GET",path:"/sites/:username/:slug/html",pathParams:c.z.object({username:c.z.string().regex(k),slug:c.z.string().regex(y)}),query:c.z.object({raw:c.z.boolean().optional(),origin:c.z.string().url().optional()}).superRefine((e,n)=>{e.raw||e.origin||n.addIssue({code:c.z.ZodIssueCode.custom,message:"either raw or origin is required",path:["origin"]})}),responses:{200:ea.otherResponse({contentType:"text/html; charset=utf-8",body:ea.type()})}}},{commonResponses:{default:ea.otherResponse({contentType:"text/html; charset=utf-8",body:ea.type()})}}),es=(0,l.vR)().router({getUserLikes:{method:"GET",path:"/users/:usernameOrId/likes",query:D,pathParams:c.z.object({usernameOrId:z}),responses:{200:c.z.object({likes:G})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),el=(0,l.vR)().router({getCurrrentUserSettings:{method:"GET",path:"/user/settings",responses:{200:c.z.object({settings:E})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateCurrentUserSettings:{method:"PATCH",path:"/user/settings",body:E.partial(),responses:{200:c.z.object({settings:E})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),ec=(0,l.vR)().router({getSite:{method:"GET",path:"/sites/:site_id",pathParams:c.z.object({site_id:c.z.string().regex(x)}),responses:{200:c.z.object({site:U})}},getSiteContext:{method:"GET",path:"/sites/:site_id/context",pathParams:c.z.object({site_id:c.z.string().regex(x)}),responses:{200:c.z.object({context:c.z.array(U)})}},getSiteBySlug:{method:"GET",path:"/sites/:username/:slug",pathParams:c.z.object({username:c.z.string().regex(k),slug:c.z.string().regex(y)}),query:c.z.object({include:c.z.array(c.z.enum(["session"])).optional()}),responses:{200:c.z.object({site:U})}},getSiteContextBySlug:{method:"GET",path:"/sites/:username/:slug/context",pathParams:c.z.object({username:c.z.string().regex(k),slug:c.z.string().regex(y)}),responses:{200:c.z.object({context:c.z.array(U)})}},createSite:{method:"POST",path:"/sites",body:O,responses:{200:c.z.object({site:U})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUserSites:{method:"GET",path:"/users/:usernameOrId/sites",query:R,pathParams:c.z.object({usernameOrId:z}),responses:{200:c.z.object({sites:L})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),ed=(0,l.vR)().router({getCurrentUserUsage:{method:"GET",path:"/user/usage",responses:{200:c.z.object({usage:c.z.number(),limit:c.z.number()})},metadata:{openapi:{security:[{bearerAuth:[]}]}}}},{commonResponses:{default:c.z.object({error:j})}}),eu=(0,l.vR)().router({getCurrentUser:{method:"GET",path:"/user",responses:{200:c.z.object({user:C})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},updateCurrentUser:{method:"PATCH",path:"/user",body:P.partial(),responses:{200:c.z.object({user:C})},metadata:{openapi:{security:[{bearerAuth:[]}]}}},getUser:{method:"GET",path:"/users/@:username",pathParams:c.z.object({username:c.z.string().regex(k)}),responses:{200:c.z.object({user:C,followed_at:c.z.string().datetime({offset:!0}).optional()})}}},{commonResponses:{400:c.z.object({error:j}),401:c.z.object({error:j}),403:c.z.object({error:j}),404:c.z.object({error:j}),429:c.z.object({error:j}),500:c.z.object({error:j})}}),ep=(0,l.vR)().router({avatar:Q,bookmarks:en,feed:et,follows:eo,html:ei,likes:es,settings:el,sites:ec,users:eu,usage:ed}),em=(e,n)=>(0,l.Ef)(ep,{baseUrl:"".concat(e,"/api/v1"),async api(e){let t=await n.getSession();return t.data.session&&(e={...e,headers:{...e.headers,Authorization:"Bearer ".concat(t.data.session.access_token)}}),await (0,l.I8)(e)}}),ef=()=>{let e=(0,i.useContext)(a.tT),n=(0,i.useContext)(a.o2);return r||(r=em((0,o.$8)({cfPagesBranch:e,cfPagesCommitSha:n}),(0,s.e)().auth)),r}},80997:function(e,n,t){"use strict";t.d(n,{W:function(){return o}});let r=[{regex:/^\/$/,fn:()=>({type:"home"})},{regex:/^\/@([a-zA-Z0-9_]{3,32})$/,fn:e=>({type:"profile",username:e[1]})},{regex:/^\/c\/([a-zA-Z0-9]{17})$/,fn:e=>({type:"site",siteId:e[1]})},{regex:/^\/@([a-zA-Z0-9_]{3,32})\/(.+)$/,fn:e=>({type:"bookmark",username:e[1],slug:e[2]})}];function o(e){for(let{regex:n,fn:t}of r){let r=e.match(n);if(r)return t(r)}return null}},75005:function(e,n,t){"use strict";t.d(n,{e:function(){return s},$:function(){return i}});var r=t(91510),o=t(58078);let a=null;function i(){return(0,o.useMemo)(()=>(a||(a=s()),a),[])}function s(){return(0,r.AY)("https://hello.websim.ai","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9jamVmZ2NqamlxeWt3YWR2dnJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTE4MzI5OTMsImV4cCI6MjAyNzQwODk5M30.vsreOYwk8pKsr8NFlzpIzWAiD-vXj6ijv_Bhn1vYtHs")}},10173:function(){}}]);